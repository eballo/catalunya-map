$(function(s){var e=function(){function t(t,a){this.config=t,this.mappaths=a,this.paper,this.winWidth,this.win,this.obj,this.selected,this.mcat={}}return t.prototype={createArrayComarcas:function(){this.config.debug&&console.log("createArrayComarcas ..."),this.mcat.cat1=paper.set(),this.mcat.cat2=paper.set(),this.mcat.cat3=paper.set(),this.mcat.cat4=paper.set(),this.mcat.cat5=paper.set(),this.mcat.cat6=paper.set(),this.mcat.cat7=paper.set(),this.mcat.cat8=paper.set(),this.mcat.cat9=paper.set(),this.mcat.cat10=paper.set(),this.mcat.cat11=paper.set(),this.mcat.cat12=paper.set(),this.mcat.cat13=paper.set(),this.mcat.cat14=paper.set(),this.mcat.cat15=paper.set(),this.mcat.cat16=paper.set(),this.mcat.cat17=paper.set(),this.mcat.cat18=paper.set(),this.mcat.cat19=paper.set(),this.mcat.cat20=paper.set(),this.mcat.cat21=paper.set(),this.mcat.cat22=paper.set(),this.mcat.cat23=paper.set(),this.mcat.cat24=paper.set(),this.mcat.cat25=paper.set(),this.mcat.cat26=paper.set(),this.mcat.cat27=paper.set(),this.mcat.cat28=paper.set(),this.mcat.cat29=paper.set(),this.mcat.cat30=paper.set(),this.mcat.cat31=paper.set(),this.mcat.cat32=paper.set(),this.mcat.cat33=paper.set(),this.mcat.cat34=paper.set(),this.mcat.cat35=paper.set(),this.mcat.cat36=paper.set(),this.mcat.cat37=paper.set(),this.mcat.cat38=paper.set(),this.mcat.cat39=paper.set(),this.mcat.cat40=paper.set(),this.mcat.cat41=paper.set(),this.mcat.cat42=paper.set()},createLlistaComarquesText:function(){this.config.debug&&console.log("create list of comarques ...");var t=[];for(var a in this.mappaths)t.push({name:this.mappaths[a].name,url:this.mappaths[a].url,total:this.mappaths[a].total});for(t=t.sort(function(t,a){return t.name.localeCompare(a.name)}),i=0;i<t.length;i++)$("<li class='list-group-item'><a href='"+t[i].url+"' class='list-group-item'>"+t[i].name+"<span class='badge'>"+t[i].total+"</span></a></li>").appendTo("ul.list")},createMap:function(t){var a=this.config,o=this;this.config.debug&&console.log("CreateMap ...");var i=0;for(var e in this.mappaths)obj=this.mcat[e],obj.push(t.path(this.mappaths[e].path).attr(this.config.comarcaAttr)),obj.animate({transform:"t0,-200"}),obj.push(t.text(this.mappaths[e].nx,this.mappaths[e].ny,this.mappaths[e].name).attr(this.config.nomComcarcaAttr_out)),obj.push(t.text(this.mappaths[e].cx,this.mappaths[e].cy,this.mappaths[e].capital).attr(this.config.nomCapitalAttr)),obj[0].comarcaName=this.mappaths[e].name,obj[1].comarcaName=this.mappaths[e].name,obj[2].comarcaName=this.mappaths[e].name,obj[0].capitalComarca=this.mappaths[e].capital,obj[1].capitalComarca=this.mappaths[e].capital,obj[2].capitalComarca=this.mappaths[e].capital,obj[0].contentText=this.mappaths[e].info,obj[1].contentText=this.mappaths[e].info,obj[2].contentText=this.mappaths[e].info,obj[0].comarcaLink=this.mappaths[e].url,obj[1].comarcaLink=this.mappaths[e].url,obj[2].comarcaLink=this.mappaths[e].url,obj[0].node.id=i,obj[0].toBack(),obj[1].toFront(),obj[2].toFront(),obj[1].hide(),obj[2].hide(),obj.hover(function(){var t={fill:a.colorIn};this[0].animate(t,100),this[1].attr(a.nomComcarcaAttr_in),this[2].show()},function(){var t={fill:a.colorOut};o.selected!=this[0].comarcaName&&(this[0].animate(t,100),this[1].attr(a.nomComcarcaAttr_out),this[2].hide())},obj,obj),this.config.useText&&(obj[0].click(function(){var t=this.comarcaName,a=this.capitalComarca,i=this.contentText,e=this.comarcaLink;o.selected=this.comarcaName,o.remove_background(),o.onMapClick(t,a,i,e)}),obj[1].click(function(){var t=this.comarcaName,a=this.capitalComarca,i=this.contentText,e=this.comarcaLink;o.selected=this.comarcaName,o.remove_background(),o.onMapClick(t,a,i,e)}),obj[2].click(function(){var t=this.comarcaName,a=this.capitalComarca,i=this.contentText,e=this.comarcaLink;o.selected=this.comarcaName,o.remove_background(),o.onMapClick(t,a,i,e)}),obj[0].touchstart(function(){var t=this.comarcaName,a=this.capitalComarca,i=this.contentText,e=this.comarcaLink;o.selected=this.comarcaName,o.remove_background(),o.onMapClick(t,a,i,e)}),obj[1].touchstart(function(){var t=this.comarcaName,a=this.capitalComarca,i=this.contentText,e=this.comarcaLink;o.selected=this.comarcaName,o.remove_background(),o.onMapClick(t,a,i,e)}),obj[2].touchstart(function(){var t=this.comarcaName,a=this.capitalComarca,i=this.contentText,e=this.comarcaLink;o.selected=this.comarcaName,o.remove_background(),o.onMapClick(t,a,i,e)})),i++;this.config.responsive?(o.responsiveResize(),$(s).resize(function(){o.responsiveResize()})):o.resizeMap(t)},remove_background:function(){var t=this.config;for(var a in this.mappaths)if(obj=this.mcat[a],obj[0].comarcaName!=this.selected){var i={fill:t.colorOut};obj[0].animate(i,100),obj[1].attr(t.nomComcarcaAttr_out),obj[2].hide()}},onMapClick:function(t,a,i,e){this.config.onClick?this.config.newWindow?s.open(e):s.location=e:(this.config.button&&(this.config.debug&&console.log("button functionality enabled"),$("#veure-contingut").show(),$("#veure-contingut").click(function(){return $(this).toggleClass("veure-clic"),s.location=e,!1})),$("#comarcaName").html("<h1>"+t+"</h1><h2>"+a+"</h2>"),$("#contentText").html(i))},resizeMap:function(t){var a=this;this.config.debug&&console.log("resizeMap ..."),t.changeSize(this.config.mapWidth,this.config.mapHeight,!0,!1),this.config.debug&&console.log("resize map with : "+this.config.mapWidth+" height : "+this.config.mapHeight),$(".map").css({width:this.config.mapWidth+"px",height:this.config.mapHeight+"px"}),$(".map-wrapper").css({width:this.config.mapWidth+this.config.textInitWidth+"px",height:"700px"}),$("#map").mouseenter(function(){a.showComarcaName()}),$("#map").mouseleave(function(){a.hideComarcaName()})},showComarcaName:function(){for(var t in this.mappaths)obj=this.mcat[t],obj[1].show()},hideComarcaName:function(){for(var t in this.mappaths)obj=this.mcat[t],obj[1].comarcaName!=this.selected&&obj[1].hide()},responsiveResize:function(){var t=this;this.config.debug&&console.log("responsiveResize ..."),winWidth=win.width(),960<=winWidth?(this.config.debug&&console.log("WindowWith > 960"),t.hideListShowMap(),this.config.mapWidth=.8*this.config.mapInitWidth,this.config.mapHeight=.8*this.config.mapInitHeight,paper.scaleAll(this.config.scale),t.resizeMap(paper)):winWidth<960&&768<=winWidth?(this.config.debug&&console.log("768 =< WindowWith < 960 "),t.hideMapShowList()):winWidth<768&&480<=winWidth?(this.config.debug&&console.log("480 =< WindowWith < 768 "),t.hideMapShowList()):winWidth<480&&(this.config.debug&&console.log("480 < WindowWith"),t.hideMapShowList()),t.showValues()},hideMapShowList:function(){$(".map-wrapper").hide(),$(".llistaComarques").show()},hideListShowMap:function(){$(".llistaComarques").hide(),$(".map-wrapper").show()},showValues:function(){this.config.debug&&(console.log("showValues ..."),console.log("Win Width: "+winWidth+" Map with: "+this.config.mapWidth+" Map Height: "+this.config.mapHeight+" Ratio: "+ratio),$("#this.config.debugInfo").html("Win Width: "+winWidth+" Map with: "+this.config.mapWidth+" Map Height: "+this.config.mapHeight+" Ratio: "+ratio))},loadMapAndText:function(){this.config.debug&&(console.log("loadMapAndText ..."),console.log("Create map with : "+this.config.mapWidth+" height : "+this.config.mapHeight)),paper=new ScaleRaphael("map",this.config.mapWidth,this.config.mapHeight),this.config.debug&&console.log("scale map : "+this.config.scale),paper.scaleAll(this.config.scale),ratio=this.config.mapWidth/this.config.mapHeight,this.config.debug&&console.log("ratio : "+ratio),win=$(s),winWidth=win.width(),this.config.debug&&console.log("Window With : "+winWidth),this.createArrayComarcas(),this.createMap(paper),this.createLlistaComarquesText()}},t}();e.create=function(t,a){return new e(t,a)},s.Catmap=e}(window)),function(t,a){a.URL_JSON="/wp-content/themes/catalunyamedieval/assets/js/catalunya-map/catalunya-map-path.json",a.MAP_OPTIONS={colorIn:"#fee8cb",colorOut:"#fff",scale:.8,mapInitWidth:825,mapInitHeight:800,textInitWidth:250,mapWidth:825,mapHeight:800,debug:!1,responsive:!0,useText:!0,button:!1,onClick:!1,newWindow:!1,comarcaAttr:{fill:"#fff",stroke:"#c7ab89","stroke-width":.8,"stroke-linejoin":"round","font-family":"Droid Sans,Verdana","font-size":"19px","font-weight":"bold",cursor:"pointer","z-index":10},nomComcarcaAttr_in:{fill:"#a07a49",stroke:"#000000","stroke-width":.4,"font-family":"Droid Sans,Verdana","font-size":"14px","font-weight":"bold",cursor:"pointer","z-index":20},nomComcarcaAttr_out:{fill:"#a07a49","stroke-width":0,"font-family":"Droid Sans,Verdana","font-size":"14px","font-weight":"bold",cursor:"pointer","z-index":20},nomCapitalAttr:{fill:"#FF9900","font-family":"Droid Sans, Arial, sans-serif","font-size":"12px","font-weight":"bold",cursor:"pointer","z-index":30}}}(window,window.Catmap||(window.Catmap={})),function(t,a){$.ajax({url:t.location.origin+a.URL_JSON,dataType:"json",async:!0,success:function(t){a.create(a.MAP_OPTIONS,t).loadMapAndText(),$("#map").fadeOut(1),$("#text").fadeIn(1e3),$("#contentText").toggle(2e3),$("#map").fadeIn(1e3),$("#legend").fadeIn(1e3)}})}(window,window.Catmap);