/*! Generated 02-11-2017 */

$(function(t){var a=function(){function a(t,a){this.config=t,this.mappaths=a,this.paper,this.winWidth,this.win,this.obj,this.selected,this.mcat={}}return a.prototype={createArrayComarcas:function(){this.config.debug&&console.log("createArrayComarcas ..."),this.mcat.cat1=paper.set(),this.mcat.cat2=paper.set(),this.mcat.cat3=paper.set(),this.mcat.cat4=paper.set(),this.mcat.cat5=paper.set(),this.mcat.cat6=paper.set(),this.mcat.cat7=paper.set(),this.mcat.cat8=paper.set(),this.mcat.cat9=paper.set(),this.mcat.cat10=paper.set(),this.mcat.cat11=paper.set(),this.mcat.cat12=paper.set(),this.mcat.cat13=paper.set(),this.mcat.cat14=paper.set(),this.mcat.cat15=paper.set(),this.mcat.cat16=paper.set(),this.mcat.cat17=paper.set(),this.mcat.cat18=paper.set(),this.mcat.cat19=paper.set(),this.mcat.cat20=paper.set(),this.mcat.cat21=paper.set(),this.mcat.cat22=paper.set(),this.mcat.cat23=paper.set(),this.mcat.cat24=paper.set(),this.mcat.cat25=paper.set(),this.mcat.cat26=paper.set(),this.mcat.cat27=paper.set(),this.mcat.cat28=paper.set(),this.mcat.cat29=paper.set(),this.mcat.cat30=paper.set(),this.mcat.cat31=paper.set(),this.mcat.cat32=paper.set(),this.mcat.cat33=paper.set(),this.mcat.cat34=paper.set(),this.mcat.cat35=paper.set(),this.mcat.cat36=paper.set(),this.mcat.cat37=paper.set(),this.mcat.cat38=paper.set(),this.mcat.cat39=paper.set(),this.mcat.cat40=paper.set(),this.mcat.cat41=paper.set(),this.mcat.cat42=paper.set()},createLlistaComarquesText:function(){this.config.debug&&console.log("create list of comarques ...");var t=[];for(var a in this.mappaths)t.push({name:this.mappaths[a].name,url:this.mappaths[a].url,total:this.mappaths[a].total});for(t=t.sort(function(t,a){return t.name.localeCompare(a.name)}),i=0;i<t.length;i++)$("<li class='list-group-item'><a href='"+t[i].url+"' class='list-group-item'>"+t[i].name+"<span class='badge'>"+t[i].total+"</span></a></li>").appendTo("ul.list")},createMap:function(a){var i=this.config,e=this;this.config.debug&&console.log("CreateMap ...");var o=0;for(var s in this.mappaths)obj=this.mcat[s],obj.push(a.path(this.mappaths[s].path).attr(this.config.comarcaAttr)),obj.animate({transform:"t0,-200"}),obj.push(a.text(this.mappaths[s].nx,this.mappaths[s].ny,this.mappaths[s].name).attr(this.config.nomComcarcaAttr_out)),obj.push(a.text(this.mappaths[s].cx,this.mappaths[s].cy,this.mappaths[s].capital).attr(this.config.nomCapitalAttr)),obj[0].comarcaName=this.mappaths[s].name,obj[1].comarcaName=this.mappaths[s].name,obj[2].comarcaName=this.mappaths[s].name,obj[0].contentText=this.mappaths[s].info,obj[1].contentText=this.mappaths[s].info,obj[2].contentText=this.mappaths[s].info,obj[0].comarcaLink=this.mappaths[s].url,obj[1].comarcaLink=this.mappaths[s].url,obj[2].comarcaLink=this.mappaths[s].url,obj[0].node.id=o,obj[0].toBack(),obj[1].toFront(),obj[2].toFront(),obj[1].hide(),obj[2].hide(),obj.hover(function(){var t={fill:i.colorIn};this[0].animate(t,100),this[1].attr(i.nomComcarcaAttr_in),this[2].show()},function(){var t={fill:i.colorOut};e.selected!=this[0].comarcaName&&(this[0].animate(t,100),this[1].attr(i.nomComcarcaAttr_out),this[2].hide())},obj,obj),this.config.useText&&(obj[0].click(function(){var t=this.comarcaName,a=this.contentText,i=this.comarcaLink;e.selected=this.comarcaName,e.remove_background(),e.onMapClick(t,a,i)}),obj[1].click(function(){var t=this.comarcaName,a=this.contentText,i=this.comarcaLink;e.selected=this.comarcaName,e.remove_background(),e.onMapClick(t,a,i)}),obj[2].click(function(){var t=this.comarcaName,a=this.contentText,i=this.comarcaLink;e.selected=this.comarcaName,e.remove_background(),e.onMapClick(t,a,i)}),obj[0].touchstart(function(){var t=this.comarcaName,a=this.contentText,i=this.comarcaLink;e.selected=this.comarcaName,e.remove_background(),e.onMapClick(t,a,i)}),obj[1].touchstart(function(){var t=this.comarcaName,a=this.contentText,i=this.comarcaLink;e.selected=this.comarcaName,e.remove_background(),e.onMapClick(t,a,i)}),obj[2].touchstart(function(){var t=this.comarcaName,a=this.contentText,i=this.comarcaLink;e.selected=this.comarcaName,e.remove_background(),e.onMapClick(t,a,i)})),o++;this.config.responsive?(e.responsiveResize(),$(t).resize(function(){e.responsiveResize()})):e.resizeMap(a)},remove_background:function(){var t=this.config;for(var a in this.mappaths)if(obj=this.mcat[a],obj[0].comarcaName!=this.selected){var i={fill:t.colorOut};obj[0].animate(i,100),obj[1].attr(t.nomComcarcaAttr_out),obj[2].hide()}},onMapClick:function(a,i,e){this.config.onClick?this.config.newWindow?t.open(e):t.location=e:(this.config.button&&(this.config.debug&&console.log("button functionality enabled"),$("#veure-contingut").show(),$("#veure-contingut").click(function(){return $(this).toggleClass("veure-clic"),t.location=e,!1})),$("#comarcaName").html("<h1>"+a+"</h1>"),$("#contentText").html(i))},resizeMap:function(t){var a=this;this.config.debug&&console.log("resizeMap ..."),t.changeSize(this.config.mapWidth,this.config.mapHeight,!0,!1),this.config.debug&&console.log("resize map with : "+this.config.mapWidth+" height : "+this.config.mapHeight),$(".map").css({width:this.config.mapWidth+"px",height:this.config.mapHeight+"px"}),$(".map-wrapper").css({width:this.config.mapWidth+this.config.textInitWidth+"px",height:this.config.mapHeight+"px"}),$("#map").mouseenter(function(){a.showComarcaName()}),$("#map").mouseleave(function(){a.hideComarcaName()})},showComarcaName:function(){for(var t in this.mappaths)obj=this.mcat[t],obj[1].show()},hideComarcaName:function(){for(var t in this.mappaths)obj=this.mcat[t],obj[1].comarcaName!=this.selected&&obj[1].hide()},responsiveResize:function(){var t=this;this.config.debug&&console.log("responsiveResize ..."),winWidth=win.width(),winWidth>=960?(this.config.debug&&console.log("WindowWith > 960"),t.hideListShowMap(),this.config.mapWidth=.8*this.config.mapInitWidth,this.config.mapHeight=.8*this.config.mapInitHeight,paper.scaleAll(this.config.scale),t.resizeMap(paper)):winWidth<960&&winWidth>=768?(this.config.debug&&console.log("768 =< WindowWith < 960 "),t.hideMapShowList()):winWidth<768&&winWidth>=480?(this.config.debug&&console.log("480 =< WindowWith < 768 "),t.hideMapShowList()):winWidth<480&&(this.config.debug&&console.log("480 < WindowWith"),t.hideMapShowList()),t.showValues()},hideMapShowList:function(){$(".map-wrapper").hide(),$(".llistaComarques").show()},hideListShowMap:function(){$(".llistaComarques").hide(),$(".map-wrapper").show()},showValues:function(){this.config.debug&&(console.log("showValues ..."),console.log("Win Width: "+winWidth+" Map with: "+this.config.mapWidth+" Map Height: "+this.config.mapHeight+" Ratio: "+ratio),$("#this.config.debugInfo").html("Win Width: "+winWidth+" Map with: "+this.config.mapWidth+" Map Height: "+this.config.mapHeight+" Ratio: "+ratio))},loadMapAndText:function(){var a=this;this.config.debug&&(console.log("loadMapAndText ..."),console.log("Create map with : "+this.config.mapWidth+" height : "+this.config.mapHeight)),paper=new ScaleRaphael("map",this.config.mapWidth,this.config.mapHeight),this.config.debug&&console.log("scale map : "+this.config.scale),paper.scaleAll(this.config.scale),ratio=this.config.mapWidth/this.config.mapHeight,this.config.debug&&console.log("ratio : "+ratio),win=$(t),winWidth=win.width(),this.config.debug&&console.log("Window With : "+winWidth),a.createArrayComarcas(),a.createMap(paper),a.createLlistaComarquesText()}},a}();a.create=function(t,i){return new a(t,i)},t.Catmap=a}(window));